@use "@/design-tokens/layout" as layout;
@use "@/design-tokens/border" as border;
@use "@/design-tokens/motion" as motion;

/* Main toggle switch container */
.toggle {
    position: relative;
    display: inline-block;
    min-width: layout.$spacing-05;
    width: layout.$spacing-09;
    height: layout.$spacing-05;

    /* Hidden checkbox input */
    input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    /* Common Slider (Toggle Background) Styles */
    .slider {
        position: absolute;
        cursor: pointer;
        inset: 0;
        background-color: var(--color-surface-input-default);
        border-radius: border.$border-radius-large;
        transition: background-color motion.$duration-slow-01 motion.$easing-productive-exit;

        /* Common knob (Toggle Button) Styles */
        &::before {
            content: "";
            position: absolute;
            height: layout.$spacing-04;
            width: layout.$spacing-04;
            left: layout.$spacing-02 / 2;
            bottom: layout.$spacing-02 / 2;
            background-color: var(--color-surface-primary-default);
            border-radius: border.$border-radius-round;
            border: 2px solid var(--color-border-primary-default);
            box-shadow: 0 2px 4px var(--color-alpha-shadow);
            transition: background-color motion.$duration-slow-01 motion.$easing-productive-exit,
                        transform motion.$duration-moderate-02 motion.$easing-productive-exit,
                        border-color motion.$duration-slow-01 motion.$easing-productive-exit;
        }
    }

    /* Checked State */
    input[type="checkbox"]:checked + .slider {
        background-color: var(--color-info-hover);

        &::before {
            transform: translateX(layout.$spacing-07);
            background-color: var(--color-surface-primary-default);
            border-color: var(--color-info-hover);
        }
    }

    /* Focus State (for accessibility) */
    &:focus-within .slider {
        outline: 2px solid var(--color-focus-ring-default);
        outline-offset: 2px;
    }

    /* Hover State */
    &:hover .slider {
        background-color: var(--color-bg-secondary-default);
    }

    &:hover input[type="checkbox"]:checked + .slider {
        background-color: var(--color-info-active);

        &::before {
            background-color: var(--color-surface-primary-default);
            border-color: var(--color-info-active);
        }
    }

    /* Disabled State: Override only the necessary properties */
    input[type="checkbox"]:disabled + .slider {
        background-color: var(--color-surface-input-default);
        cursor: not-allowed;
        opacity: 0.5;

        /* Override knob (before) styles in the disabled state */
        &::before {
            background-color: var(--color-surface-primary-default);
            border-color: var(--color-border-primary-default);
        }
    }

    input[type="checkbox"]:checked:disabled + .slider {
        background-color: var(--color-info-hover);
        cursor: not-allowed;
        opacity: 0.5;

        &::before {
            background-color: var(--color-surface-primary-default);
            border-color: var(--color-info-hover);
        }
    }
}
